# Message Server Bot

## Задача

**Написать docker compose, в котором работают:**

- Web приложение, на FastApi. У приложения должно быть несколько ендпоинтов:

  1) GET 'api/v1/messages/' показывает список всех сообщений;

  2) POST 'api/v1/message/' позволяет написать сообщение.

- Веб сервер должен быть Nginx.

- Mongo как БД для сообщений.

- Телеграм бот (aiogram3), который показывает сообщения и позволяет создать сообщение самому.

**Будет плюсом:**

  1) Добавление кэширования при помощи Redis (кеш стирается, когда появляется новое сообщение)

  2) Развертывание на удалённом сервере и добавление ssl через certbot.

  3) Реализовать код так, чтобы было видно, кто написал сообщение.
  
  4) Добавление пагинации.

## Результат

**Docker compose, в котором работают:**

- Web приложение, на FastApi. У приложения должно быть несколько ендпоинтов:

  1) GET 'api/v1/messages/' показывает список всех сообщений;

  2) POST 'api/v1/message/' позволяет написать сообщение.

- Веб сервер Nginx.

- MongoDB как БД для сообщений.

- Телеграм бот (aiogram3), который показывает сообщения и позволяет создать сообщение самому.

- Кэширование при помощи Redis (кеш стирается, когда появляется новое сообщение).

- Код реализован так, что видно, кто написал сообщение.

## Описание проекта

Проект построен следующим образом:

### Структура проекта

![image](https://github.com/user-attachments/assets/aae79f4b-5fa4-4060-9712-9bde5e2761b0)

**В папке app находится код API на FastAPI:**

  - routers/messages.py: Маршрутизатор сообщений.

  - config.py: Параметры приложения (Извлечение данных из .env).

  - database.py: Взаимодейтсвие с MongoDB.

  - models.py: Модели Pydantic для валидации.

  - main.py: Точка входа для API.

**В папке bot находится код Telegram-Бота на Aiogram3:**

  - handlers.py: Маршрутизатор сообщений с обработчиками.

  - config.py: Параметры бота (Извлечение данных из .env).

  - main.py: Точка входа для Бота.

### Оставшиеся файлы

В корне проекта:

  - .env: Файл с настройками для всего приложения (Не экспортируется на GitHub в целях безопасности).

  - .gitignore: Файл с указанием игнорирования папок и файлов для системы контроля версий Git.

  - docker-compose.yml: Файл конфигурации docker-compose.

  - nginx.conf: Файл кофнигурации Nginx.

В папке app:

  - Dockerfile: Dockerfile для API.

В папке bot:

  - Dockerfile: Dockerfile для Telegram-Бота.
